{% extends "base.html" %}
{% block page_title %}Works | Novels Project{% endblock %}

{% block content %}
<div class="container content">
  <div class="row">
    <div class="col-md-12">
      <table class="table table-bordered table-striped">
        <thead>
          <tr>
            <th>Id</th>
            <th>Title</th>
            <th>Author</th>
            <th>Year</th>
            <th>Volumes</th>
          </tr>
        </thead>
        <tbody>
          {% for work in works %}
          <tr>
            <td><small>{{ work.id }}</small></td>
            <td><span data-toggle="tooltip" title="{{ work.title }}"> {{ work.title|truncate(60) }}</span></td>
            <td>{{ work.author|truncate(40) }}</td>
            <td>{{ work.year }}</td>
            <td>
              <ul class="nav nav-pills" role="tablist">
                <li role="presentation" class="dropdown">
                  <a id="dLabel-{{ work.id }}" href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" role="button" aria-expanded="false">
                    {{ work.volumes|length }} vol.<span class="caret"></span>
                  </a>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel-{{ work.id }}">
                    {% set counter = 1 %}
                    {% for vol in work.volumes %}
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/volume/{{ vol.sha1 }}">Volume {{ counter }}</a></li>
                      {% set counter = counter + 1 %}
                    {% endfor %}
                  </ul>
                </li>
              </ul>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

    </div>
  </div>
</div>
{% endblock %}

